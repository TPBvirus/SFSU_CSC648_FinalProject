<!--
----------------------SFSU EXCLUSIVE----------------------------
File Name:  Dashboard.ejs
Course: CSC 648
Author:  Team 7    
Last-Updated:  12/17/2024
Description: Dashboard which lists all recieved messages for user.
Editors: Jaylin Jack 
-->

<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X937XJ9BX8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X937XJ9BX8');
</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dashboard</title>
    <!-- Including the stylesheet -->
    <link rel="stylesheet" href="../src/stylesheets/about_us_stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script src="../src/functions/searchFunctions.js"></script>
</head>
<body>
    <div class = "header">
        <img src = "../images/logo.png" width="500" height="150">
        <h1 class = "title">Dashboard</h1>
        <h5 class = "disclaimer">"SFSU Software Engineering Project CSC 648-848, Fall 2024. For Demonstration Only"</h5>
    </div>
    <nav>
        <ul class="navBar">
            <li><a href="/"><i class="fa-solid fa-house" style="font-size: 36px;"></i></a></li><li class="search-container">        
                <div class="container">
                    <div class="search-container">
                        <!-- Dropdown for Department -->
                        <select type="search-dropdown" id="department" onchange="" >
                            <option value="">All</option>
                                <% subject.forEach(subject => { %>
                                <option value="<%= subject.name %>"><%=subject.name %></option>
                            <% }); %>
                            
                        </select>
                        <!-- Search Button -->

                        <div>
                            <input type="search-bar" name="query" id="description" placeholder="Search For Tutors" maxlength="40">
                        </div>
                    </div>
                    <button type="search-btn" onclick="performSearch()">&#x1F50D</button></div>	
                </div>
            
            </li>

            <li><a href="/tutor_application">Tutor Application</a></li>
            <li><a href="/dashboard">Dashboard</a></li>
            <li><a href="/about-us">About Us</a></li>
            <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>


    <!--With the help from ChatGPT assistance-->
    <div class="grid-container">
        <!-- Displaying the logged-in user's name -->
        <div class="grid-item">
            <h2><%= 'Hello ' + name %></h2>
        </div>
        

        
    
        
        <div class="grid-item">
            <!-- Received Messages Section -->
            <div class="grid-item">
                <h2>Received Messages</h2>
            </div>
            <!-- Check if there are received messages -->
            <% if (messages.length === 0) { %>
                <p>You have no received messages.</p>
            <% } else { %>
                <ul class="grid-item">
                    <% for (let i = 0; i < messages.length; i++) { %>
                        <li class="grid-item">
                            <strong>From: <%= senders[i] %></strong>
                            <p><%= messages[i] %></p>
                        </li>
                    <% } %>
                </ul>
            <% } %>
        </div>

        <div class="grid-item">
            <!-- Tutor Postings Section -->
            <div class="grid-item">
                <h2>Tutor Postings</h2>
            </div>
            <!-- Check if there are live tutor postings -->
            <% if (tutorPostings.length === 0) { %>
                <p>You have no live Tutor Postings.</p>
            <% } else { %>
                <ul class="grid-item">
                    <% for (let i = 0; i < tutorPostings.length; i++) { %>
                        <li class="grid-item">
                            <strong>Tutor Name:</strong> <%= tutorPostings[i].name %>
                            <br>
        
                            <img src="<%= tutorPostings[i].photo %>" alt="Tutor Image" height="100px" width="100px" />
                            <br>
        
                            <strong>Video:</strong>
                            <% if (tutorPostings[i].video) { %>
                                <video controls width="480px" height="854px">
                                    <source src="<%= tutorPostings[i].video %>">
                                    Your browser does not support the video tag.
                                </video>
                            <% } else { %>
                                <p>No video available for this tutor.</p>
                            <% } %>
                            <br>
                            <strong>Description:</strong> <%= tutorPostings[i].bio %> 
                            <br>
                            <strong>Courses:</strong> <%= tutorPostings[i].courses %> 
                            <br>
                            <strong>Subject: </strong> <%= tutorPostings[i].subject %>
                        </li>
                    <% } %>
                </ul>
            <% } %>
        </div>

    </div>

    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <p class="default">
    </p>
</body>
<footer>
    <div class="footer">
        <div class="person1"><p><br></p></div>
    </div>
</footer> 
</html>
