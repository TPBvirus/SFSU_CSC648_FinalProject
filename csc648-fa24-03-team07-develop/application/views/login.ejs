<!--
----------------------SFSU EXCLUSIVE----------------------------
File Name:  login.ejs
Course: CSC 648
Author:  Team 7    
Last-Updated:  12/17/2024
Description: Login page which lists logs in users with registered_users accounts
Editors: Jaylin Jack & Zarko Cosovic
-->

<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X937XJ9BX8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X937XJ9BX8');
</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Login</title>
    <link rel="stylesheet" href="../src/stylesheets/about_us_stylesheet.css"> <!-- Add the common stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="../src/functions/searchFunctions.js"></script>
</head>
<body>
    <div class = "header">
        <img src = "../images/logo.png" width="500" height="150">
        <h1 class = "title">Login</h1>
        <h5 class = "disclaimer">"SFSU Software Engineering Project CSC 648-848, Fall 2024. For Demonstration Only"</h5>
    </div>

    <!-- Navigation Bar -->
    <nav>
        <ul class="navBar">

            
            <li><a href="/"><i class="fa-solid fa-house" style="font-size: 36px;"></i></a></li><li class="search-container">        
                <div class="container">
                    <div class="search-container">
                        <!-- Dropdown for Department -->
                        <select type="search-dropdown" id="department" onchange="" >
                            <option value="">All</option>
                                <% subject.forEach(subject => { %>
                                <option value="<%= subject.name %>"><%=subject.name %></option>
                            <% }); %>
                            
                        </select>
                        <!-- Search Button -->

                        <div>
                            <input type="search-bar" name="query" id="description" placeholder="Search For Tutors" maxlength="40">
                        </div>
                    </div>
                    <button type="search-btn" onclick="performSearch()">&#x1F50D</button></div>	
                </div>
            
            </li>
            <li><a href="/tutor_application">Tutor Application</a></li>
            
            <!-- Search Bar and Button -->
            


            <li><a href="/dashboard">Dashboard</a></li>
            <li><a href="/about-us">About Us</a></li>


            <!-- If user is logged in -->
            <!-- Present the logout button -->
            <!-- If not then present the login and registration button -->
            <li><a href="/login">Login</a></li>
            <li><a href="/registration">Register</a></li>
            
        </ul>
    </nav>
    
    <% if (message) { %>
        <h2 class = "default"><%= message %></h2>
    <% }else{ %>
        <h2 class = "default">Welcome Back!</h2>
    <% } %>

    
    <!--With the help from ChatGPT assistance-->
    <!-- Login Form -->
    <div class="form-container">
        <form id="loginForm" method = "POST">
            <label for="email">Email:</label>
            <input type="text" id="email" name="email" required><br>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required><br>

            <!-- Remember Me Checkbox -->
            <div class="remember-me">
                <input type="checkbox" id="rememberMe" name="rememberMe">
                <label for="rememberMe">Remember Me?</label>
            </div>

            <button type="submit">Login</button>
        </form>
        <p><a href="/forgot-password">Forgot your password?</a></p>
        
        <p>Don't have an account? <a href="/registration">Register here</a></p>
    </div>

    <script>
        /*document.getElementById("loginForm").addEventListener("submit", function(event) {
            event.preventDefault();
            // Handle login logic here, e.g., validate user input, send data to the server, etc.
        });*/
		const form = document.querySelectorAll("loginForm");

		form.addEventListener('submit', (event) => {
			event.preventDefault(); // Prevent the default form submission
			
			const formData = new FormData(form);
			// Send the FormData object to the server
			fetch('/login', {
				method: 'POST',
				headers: {
					'Content-Type': 'multipart/form-data'
				},
				body: formData
			})
			.then(response => {
			// Handle the server response
			})
			.catch(error => {
			// Handle any errors
			});
		});
    </script>
</body>
<footer>
    <div class="footer">
        <div class="person1"><p><br></p></div>
    </div>
</footer> 
</html>